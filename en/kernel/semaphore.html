<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Semaphore | Huawei LiteOS | English Site</title>
    <meta name="description" content="A Lightweight IoT Operating System that Makes Everything Around Us Smart">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/styles.d2f7ed44.css" as="style"><link rel="preload" href="/assets/js/app.d2f7ed44.js" as="script"><link rel="preload" href="/assets/js/28.231c5754.js" as="script"><link rel="prefetch" href="/assets/css/1.styles.74193471.css"><link rel="prefetch" href="/assets/js/1.74193471.js"><link rel="prefetch" href="/assets/css/2.styles.9e4108f9.css"><link rel="prefetch" href="/assets/js/2.9e4108f9.js"><link rel="prefetch" href="/assets/js/3.00d2e81f.js"><link rel="prefetch" href="/assets/js/4.d9165f93.js"><link rel="prefetch" href="/assets/js/5.c702d309.js"><link rel="prefetch" href="/assets/js/6.abdb9c68.js"><link rel="prefetch" href="/assets/js/7.c48b9a2e.js"><link rel="prefetch" href="/assets/js/8.b8af3aed.js"><link rel="prefetch" href="/assets/js/9.5a9a69b9.js"><link rel="prefetch" href="/assets/js/10.3043005d.js"><link rel="prefetch" href="/assets/js/11.20ae95ff.js"><link rel="prefetch" href="/assets/js/12.da171e2f.js"><link rel="prefetch" href="/assets/js/13.6e5e00b3.js"><link rel="prefetch" href="/assets/js/14.98c98176.js"><link rel="prefetch" href="/assets/js/15.cafbe942.js"><link rel="prefetch" href="/assets/js/16.4e81fc5d.js"><link rel="prefetch" href="/assets/js/17.a2de738d.js"><link rel="prefetch" href="/assets/js/18.1f00b4ed.js"><link rel="prefetch" href="/assets/js/19.bdaf185c.js"><link rel="prefetch" href="/assets/js/20.dbff124f.js"><link rel="prefetch" href="/assets/js/21.38996d62.js"><link rel="prefetch" href="/assets/js/22.1b4ae143.js"><link rel="prefetch" href="/assets/js/23.4e4496e3.js"><link rel="prefetch" href="/assets/js/24.167916ef.js"><link rel="prefetch" href="/assets/js/25.0933765a.js"><link rel="prefetch" href="/assets/js/26.1b559c62.js"><link rel="prefetch" href="/assets/js/27.5d60b7a5.js"><link rel="prefetch" href="/assets/js/29.03e3f815.js"><link rel="prefetch" href="/assets/js/30.fbfc88f1.js"><link rel="prefetch" href="/assets/js/31.5ff7cfcb.js"><link rel="prefetch" href="/assets/js/32.e16fa6d3.js"><link rel="prefetch" href="/assets/js/33.3de4af60.js"><link rel="prefetch" href="/assets/js/34.b2d40b7b.js"><link rel="prefetch" href="/assets/js/35.94f8023d.js"><link rel="prefetch" href="/assets/js/36.dbebfd32.js"><link rel="prefetch" href="/assets/js/37.4957c528.js"><link rel="prefetch" href="/assets/js/38.3f6f010d.js"><link rel="prefetch" href="/assets/js/39.6257b6a8.js"><link rel="prefetch" href="/assets/js/40.e6671e62.js"><link rel="prefetch" href="/assets/js/41.72ff4436.js"><link rel="prefetch" href="/assets/js/42.e07baaa7.js"><link rel="prefetch" href="/assets/js/43.96e44ef3.js"><link rel="prefetch" href="/assets/js/44.6327767e.js"><link rel="prefetch" href="/assets/js/45.71c30aa6.js"><link rel="prefetch" href="/assets/js/46.de092141.js"><link rel="prefetch" href="/assets/js/47.9801ae43.js"><link rel="prefetch" href="/assets/js/48.3cec44ed.js"><link rel="prefetch" href="/assets/js/49.21b82d30.js"><link rel="prefetch" href="/assets/js/50.41115d1e.js"><link rel="prefetch" href="/assets/js/51.955d8f52.js"><link rel="prefetch" href="/assets/js/52.5eff4de3.js"><link rel="prefetch" href="/assets/js/53.16bfdcc7.js"><link rel="prefetch" href="/assets/js/54.8d5a61c2.js"><link rel="prefetch" href="/assets/js/55.734ae693.js"><link rel="prefetch" href="/assets/js/56.176d0698.js"><link rel="prefetch" href="/assets/js/57.1a7efef7.js"><link rel="prefetch" href="/assets/js/58.e2e7c45b.js"><link rel="prefetch" href="/assets/js/59.22a86617.js"><link rel="prefetch" href="/assets/js/60.012a8039.js"><link rel="prefetch" href="/assets/js/61.0213d131.js"><link rel="prefetch" href="/assets/js/62.8915065c.js"><link rel="prefetch" href="/assets/js/63.6aced2b4.js"><link rel="prefetch" href="/assets/js/64.07392893.js"><link rel="prefetch" href="/assets/js/65.fda008aa.js"><link rel="prefetch" href="/assets/js/66.3f9ef468.js"><link rel="prefetch" href="/assets/js/67.80888707.js"><link rel="prefetch" href="/assets/js/68.5d46a69e.js"><link rel="prefetch" href="/assets/js/69.02ff4d5f.js"><link rel="prefetch" href="/assets/js/70.603a6791.js"><link rel="prefetch" href="/assets/js/71.a04dd74c.js"><link rel="prefetch" href="/assets/js/72.cb525313.js"><link rel="prefetch" href="/assets/js/73.f7c72a7b.js"><link rel="prefetch" href="/assets/js/74.058b9009.js"><link rel="prefetch" href="/assets/js/75.941c6081.js"><link rel="prefetch" href="/assets/js/76.8058eedc.js"><link rel="prefetch" href="/assets/js/77.046261f7.js"><link rel="prefetch" href="/assets/js/78.50ec362f.js"><link rel="prefetch" href="/assets/js/79.714ac91c.js"><link rel="prefetch" href="/assets/js/80.efb8088f.js"><link rel="prefetch" href="/assets/js/81.8782a080.js"><link rel="prefetch" href="/assets/js/82.ed04d225.js"><link rel="prefetch" href="/assets/js/83.ea66a7fa.js"><link rel="prefetch" href="/assets/js/84.d58317ea.js"><link rel="prefetch" href="/assets/js/85.45da5b8e.js"><link rel="prefetch" href="/assets/js/86.f09ec09c.js"><link rel="prefetch" href="/assets/js/87.04d34f4b.js"><link rel="prefetch" href="/assets/js/88.a208173b.js"><link rel="prefetch" href="/assets/js/89.5b4341ea.js"><link rel="prefetch" href="/assets/js/90.39676ae5.js"><link rel="prefetch" href="/assets/js/91.fab6ba89.js"><link rel="prefetch" href="/assets/js/92.f60ee17f.js"><link rel="prefetch" href="/assets/js/93.08e1a22f.js"><link rel="prefetch" href="/assets/js/94.9aa6ce3b.js"><link rel="prefetch" href="/assets/js/95.ddaf81b8.js"><link rel="prefetch" href="/assets/js/96.9a881835.js"><link rel="prefetch" href="/assets/js/97.9ada6d08.js"><link rel="prefetch" href="/assets/js/98.b42a347b.js"><link rel="prefetch" href="/assets/js/99.c5eaaa7f.js"><link rel="prefetch" href="/assets/js/100.336d27b7.js"><link rel="prefetch" href="/assets/js/101.e652f3f1.js"><link rel="prefetch" href="/assets/js/102.9d0106c1.js"><link rel="prefetch" href="/assets/js/103.52d7e0a9.js"><link rel="prefetch" href="/assets/js/104.6713cf74.js"><link rel="prefetch" href="/assets/js/105.76026e8f.js"><link rel="prefetch" href="/assets/js/106.8745239b.js"><link rel="prefetch" href="/assets/js/107.388219f5.js"><link rel="prefetch" href="/assets/js/108.229ddde0.js"><link rel="prefetch" href="/assets/js/109.35ae688d.js"><link rel="prefetch" href="/assets/js/110.00f94a9b.js"><link rel="prefetch" href="/assets/js/111.f672bfa2.js"><link rel="prefetch" href="/assets/js/112.2c842d2d.js"><link rel="prefetch" href="/assets/js/113.16ea21f4.js"><link rel="prefetch" href="/assets/js/114.046bdf03.js"><link rel="prefetch" href="/assets/js/115.c159371a.js"><link rel="prefetch" href="/assets/js/116.496bbc50.js"><link rel="prefetch" href="/assets/js/117.ef062454.js"><link rel="prefetch" href="/assets/js/118.a0609718.js"><link rel="prefetch" href="/assets/js/119.90c89d87.js"><link rel="prefetch" href="/assets/js/120.e8529972.js"><link rel="prefetch" href="/assets/js/121.d3966ee7.js"><link rel="prefetch" href="/assets/js/122.678ec60d.js"><link rel="prefetch" href="/assets/js/123.3b9803c9.js"><link rel="prefetch" href="/assets/js/124.95520141.js"><link rel="prefetch" href="/assets/js/125.1f3271e7.js"><link rel="prefetch" href="/assets/js/126.29e1a314.js"><link rel="prefetch" href="/assets/js/127.6837657c.js"><link rel="prefetch" href="/assets/js/128.1b1e9270.js"><link rel="prefetch" href="/assets/js/129.5769d786.js"><link rel="prefetch" href="/assets/js/130.f831bb40.js"><link rel="prefetch" href="/assets/js/131.f55596db.js"><link rel="prefetch" href="/assets/js/132.0e05ecea.js"><link rel="prefetch" href="/assets/js/133.e270b947.js"><link rel="prefetch" href="/assets/js/134.d73ce062.js"><link rel="prefetch" href="/assets/js/135.1485a56c.js"><link rel="prefetch" href="/assets/js/136.980b8376.js"><link rel="prefetch" href="/assets/js/137.ecbdf020.js"><link rel="prefetch" href="/assets/js/138.4288ffa5.js"><link rel="prefetch" href="/assets/js/139.6cd6ab0f.js"><link rel="prefetch" href="/assets/js/140.cc6e31bf.js"><link rel="prefetch" href="/assets/js/141.768d236c.js"><link rel="prefetch" href="/assets/js/142.0ee28ac3.js"><link rel="prefetch" href="/assets/js/143.f48f9b59.js"><link rel="prefetch" href="/assets/js/144.fec50a15.js"><link rel="prefetch" href="/assets/js/145.dda14819.js"><link rel="prefetch" href="/assets/js/146.f4d318ce.js"><link rel="prefetch" href="/assets/js/147.b14631c5.js"><link rel="prefetch" href="/assets/js/148.1f807ff7.js"><link rel="prefetch" href="/assets/js/149.b6d00844.js"><link rel="prefetch" href="/assets/js/150.5ee1c0cc.js"><link rel="prefetch" href="/assets/js/151.1c27c778.js"><link rel="prefetch" href="/assets/css/152.styles.f6a7d50e.css"><link rel="prefetch" href="/assets/js/vendors~docsearch.f6a7d50e.js">
    <link rel="stylesheet" href="/assets/css/styles.d2f7ed44.css"><link rel="stylesheet" href="/assets/css/1.styles.74193471.css"><link rel="stylesheet" href="/assets/css/2.styles.9e4108f9.css"><link rel="stylesheet" href="/assets/css/152.styles.f6a7d50e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><!----> <span class="site-name">Huawei LiteOS | English Site</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/getting-started.html" class="nav-link">Getting Started</a></div><div class="nav-item"><a href="/en/kernel/" class="nav-link router-link-active">Develop Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kernel/semaphore.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/kernel/semaphore.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div> <a href="https://github.com/LiteOS/LiteOS_Documents" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/getting-started.html" class="nav-link">Getting Started</a></div><div class="nav-item"><a href="/en/kernel/" class="nav-link router-link-active">Develop Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/kernel/semaphore.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/en/kernel/semaphore.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div> <a href="https://github.com/LiteOS/LiteOS_Documents" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/en/kernel/" class="sidebar-link">Overview</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Basic Kernel</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/en/kernel/task.html" class="sidebar-link">Task</a></li><li><a href="/en/kernel/memory.html" class="sidebar-link">Memory</a></li><li><a href="/en/kernel/interrupt.html" class="sidebar-link">Interrupt</a></li><li><a href="/en/kernel/queue.html" class="sidebar-link">Queue</a></li><li><a href="/en/kernel/event.html" class="sidebar-link">Event</a></li><li><a href="/en/kernel/mutex.html" class="sidebar-link">Mutex</a></li><li><a href="/en/kernel/semaphore.html" class="active sidebar-link">Semaphore</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/kernel/semaphore.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/en/kernel/semaphore.html#development-guidelines" class="sidebar-link">Development Guidelines</a></li><li class="sidebar-sub-header"><a href="/en/kernel/semaphore.html#precautions" class="sidebar-link">Precautions</a></li><li class="sidebar-sub-header"><a href="/en/kernel/semaphore.html#programming-example" class="sidebar-link">Programming Example</a></li></ul></li><li><a href="/en/kernel/time-magmt.html" class="sidebar-link">Time Management</a></li><li><a href="/en/kernel/swtmr.html" class="sidebar-link">Software Timers</a></li><li><a href="/en/kernel/list.html" class="sidebar-link">Doubly-Linked List</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>ErrorCode Reference</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/en/kernel/errorcode-task.html" class="sidebar-link">Task Error Codes</a></li><li><a href="/en/kernel/errorcode-queue.html" class="sidebar-link">Queue Error Code</a></li><li><a href="/en/kernel/errorcode-event.html" class="sidebar-link">Event Error Codes</a></li><li><a href="/en/kernel/errorcode-mutex.html" class="sidebar-link">Mutex Error Code</a></li><li><a href="/en/kernel/errorcode-semaphore.html" class="sidebar-link">Semaphore Error Codes</a></li><li><a href="/en/kernel/errorcode-swtmr.html" class="sidebar-link">Software Timer Error Codes</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="semaphore"><a href="#semaphore" aria-hidden="true" class="header-anchor">#</a> Semaphore</h1> <p></p><div class="table-of-contents"><ul><li><a href="#overview">Overview</a><ul><li><a href="#basic-concept">Basic Concept</a></li><li><a href="#operation-mechanism">Operation Mechanism</a></li></ul></li><li><a href="#development-guidelines">Development Guidelines</a><ul><li><a href="#usage-scenarios">Usage Scenarios</a></li><li><a href="#functions">Functions</a></li><li><a href="#development-process">Development Process</a></li></ul></li><li><a href="#precautions">Precautions</a></li><li><a href="#programming-example">Programming Example</a><ul><li><a href="#example-description">Example Description</a></li><li><a href="#example-code">Example Code</a></li><li><a href="#verification">Verification</a></li></ul></li></ul></div><p></p> <h2 id="overview"><a href="#overview" aria-hidden="true" class="header-anchor">#</a> Overview</h2> <h3 id="basic-concept"><a href="#basic-concept" aria-hidden="true" class="header-anchor">#</a> Basic Concept</h3> <p>A semaphore is a mechanism used for communication within a kernel, to achieve synchronization or mutual exclusion of critical resources between tasks.</p> <p>In a multi-task system, it is necessary to synchronize one task with another or prevent tasks battling for critical resources. Semaphores are a good choice to serve that purpose.</p> <p>Typically, a numerical value of a signal is used to correspond to the number of available resources. It means mutually exclusive resources remained that could be occupied. The meaning of its value is divided into two kinds of situations:</p> <ul><li><p>0, it means the post operation that is not accumulated, and it is possible to block tasks on this signal.</p></li> <li><p>Positive number, it means there is one or several release operations which are posted.</p></li></ul> <p>The differences to use between semaphore for the purpose of synchronization and semaphore for the purpose of mutex are:</p> <ul><li><p>If a semaphore is used as a mutex, it is created with a full internal counter. Each time a task waits on critical resources, it is assigned the semaphore and the counter value is decreased by 1. When the counter value drops to 0, subsequent tasks are blocked from getting the semaphore.</p></li> <li><p>If a semaphore is used for task synchronization, it is created with an empty counter. When task 1 attempts to get the semaphore, it is blocked because the counter has reached the maximum value. Task 1 will enter Ready or Running state after task 2 releases the semaphore, thereby achieving task synchronization.</p></li></ul> <h3 id="operation-mechanism"><a href="#operation-mechanism" aria-hidden="true" class="header-anchor">#</a> Operation Mechanism</h3> <p><strong>Semaphore Control Block</strong></p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/**
 * @ingroup los_sem
 * Semaphore control structure.
 */</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span>
<span class="token punctuation">{</span>
    UINT8           usSemStat<span class="token punctuation">;</span>          <span class="token comment">/**whether to use flag bit*/</span>
    UINT16          uwSemCount<span class="token punctuation">;</span>         <span class="token comment">/**semaphore quantity index*/</span>
    UINT32UINT16    usMaxSemCount<span class="token punctuation">;</span>      <span class="token comment">/**Maximum number of semaphores*/</span>
    UINT32          usSemID<span class="token punctuation">;</span>            <span class="token comment">/**semaphore count*/</span>
    LOS_DL_LIST     stSemList<span class="token punctuation">;</span>          <span class="token comment">/**suspend the task blocked on the semaphore*/</span>
<span class="token punctuation">}</span>SEM_CB_S<span class="token punctuation">;</span>
</code></pre></div><p><strong>Semaphore Operation Principle</strong></p> <p>During semaphore initialization, memory is allocated to N semaphores. N is configurable by users and limited by memory. All semaphores are initialized and added to the linked list of semaphores that are not in use.</p> <p>During semaphore creation, a semaphore is obtained from the linked list of semaphores that are not in use and the initial value of the semaphore is set.</p> <p>If the internal counter of a semaphore is more than 0 when the semaphore is pended, the counter value is decreased by 1 and the pending succeeds. If the counter value is 0, tasks are blocked from getting the semaphore and wait for other tasks to post the semaphore. The timeout interval of waiting on the semaphore can be configured. If a task is blocked from getting the semaphore, suspend the task to the tail of the queue of tasks waiting on the semaphore.</p> <p>If no tasks are waiting on a semaphore, the counter value is increased by 1 and the semaphore is posted. Otherwise, wake up the first task in the queue of tasks waiting on the semaphore.</p> <p>During semaphore deletion, the semaphore that is in use is set to be not in use and is added to the linked list of semaphores that are not in use.</p> <p>A semaphore allows multiple tasks to access the same resource at the same time but sets a limit on the number of the tasks. Tasks are not allowed to access the resource if the maximum number of the tasks that can access the resource is reached and need to wait for one task to release the semaphore.</p> <p>Working principle of semaphore</p> <p><img src="/assets/img/semaphore-operation.3bf382c8.png" alt></p> <h2 id="development-guidelines"><a href="#development-guidelines" aria-hidden="true" class="header-anchor">#</a> Development Guidelines</h2> <h3 id="usage-scenarios"><a href="#usage-scenarios" aria-hidden="true" class="header-anchor">#</a> Usage Scenarios</h3> <p>Semaphores find their use in locking resources, counting resources, and maintaining synchronization between threads or between threads and interrupts.</p> <h3 id="functions"><a href="#functions" aria-hidden="true" class="header-anchor">#</a> Functions</h3> <p>The semaphore module provides the following functions:</p> <table><thead><tr><th>Function Category</th> <th>API</th> <th>Description</th></tr></thead> <tbody><tr><td>Semaphore creation and deletion</td> <td><code>LOS_SemCreate</code></td> <td>Creates a semaphore</td></tr> <tr><td></td> <td><code>LOS_BinarySemCreate</code></td> <td>Creates a binary semaphore</td></tr> <tr><td></td> <td><code>LOS_SemDelete</code></td> <td>Deletes a semaphore</td></tr> <tr><td>Semaphore pend and post</td> <td><code>LOS_SemPend</code></td> <td>Pends on a semaphore</td></tr> <tr><td></td> <td><code>LOS_SemPost</code></td> <td>Posts a semaphore</td></tr></tbody></table> <h3 id="development-process"><a href="#development-process" aria-hidden="true" class="header-anchor">#</a> Development Process</h3> <p>Semaphore typical development process:</p> <ol><li><p>Call the <code>LOS_SemCreate</code> API to create a semaphore.</p></li> <li><p>Call the <code>LOS_SemPend</code> to pend on a semaphore.</p></li></ol> <p>Huawei LiteOS takes actions depending on the semaphore pend mode.</p> <ul><li><p><strong>Non-blocking mode</strong>: If the maximum number of tasks allowed by the semaphore is not reached, the request for the semaphore is fulfilled. Otherwise, the request for the semaphore is rejected.</p></li> <li><p><strong>Permanent blocking mode</strong>: The requesting task waits endlessly for a semaphore and the task enters Blocked state in the meantime. If the maximum number of tasks allowed by the semaphore is not reached, the request for the semaphore is fulfilled. Otherwise, the operating system blocks the requesting task until a task releases the semaphore. It then selects the ready task with the highest priority to be executed.</p></li> <li><p><strong>Temporary blocking mode</strong>: the requesting task waits for a specified period of time for a semaphore and enters Blocked state in the meantime. If the maximum number of tasks allowed by the semaphore is not reached, the request for the semaphore is fulfilled. Otherwise, the operating system blocks the requesting task until a task releases the semaphore or the timeout period elapses. It then selects the ready task with the highest priority to be executed.</p></li></ul> <ol start="3"><li>Call the <code>LOS_SemPost</code> API to post a semaphore.</li></ol> <ul><li><p>If there are tasks blocked from acquiring the semaphore, the operating system wakes up the first blocked task. The woken-up task then enters Ready state and is scheduled.</p></li> <li><p>If there are no tasks blocked from acquiring the semaphore, the operating system posts the semaphore.</p></li></ul> <ol start="4"><li>Call the <code>LOS_SemDelete</code> API to delete a semaphore.</li></ol> <h2 id="precautions"><a href="#precautions" aria-hidden="true" class="header-anchor">#</a> Precautions</h2> <ul><li>As interrupts cannot be blocked, permanent blocking and temporary blocking are not allowed for interrupts during the request for a semaphore.</li></ul> <h2 id="programming-example"><a href="#programming-example" aria-hidden="true" class="header-anchor">#</a> Programming Example</h2> <h3 id="example-description"><a href="#example-description" aria-hidden="true" class="header-anchor">#</a> Example Description</h3> <p>In the programming example, the following activities will happen:</p> <ol><li><p>The <code>Example_TaskEntry</code> task is executed to create a semaphore. Task scheduling is locked. Two tasks <code>Example_SemTask1</code> and <code>Example_SemTask2</code> are created, where <code>Example_SemTask2</code> takes a higher priority than <code>Example_SemTask1</code>. Then, task scheduling is unlocked. <code>Example_TaskEntry</code> releases the semaphore.</p></li> <li><p><code>Example_SemTask2</code> is granted the semaphore, scheduled, and sent to sleep mode for 20 ticks. While <code>Example_SemTask2</code> is delayed, <code>Example_SemTask1</code> is woken up.</p></li> <li><p><code>Example_SemTask1</code> pends on the semaphore and is willing to wait the semaphore for 10 ticks to become free. At the time when <code>Example_SemTask1</code> requests the semaphore, the semaphore is held by <code>Example_SemTask2</code> and consequently <code>Example_SemTask1</code> is suspended. After the 10-tick wait period elapses, the semaphore is still out of the reach of <code>Example_SemTask1</code>, and <code>Example_SemTask1</code> is woken up, attempting to wait permanently for the semaphore. The wait for semaphore switches <code>Example_SemTask1</code> to suspended state.</p></li> <li><p>After 20 ticks, <code>Example_SemTask2</code> is woken up and releases the semaphore. <code>Example_SemTask1</code> is scheduled, granted the semaphore, and finally releases it.</p></li> <li><p>40 ticks after <code>Example_SemTask1</code> is finished, Example_TaskEntry is woken up, deletes the semaphore and then the two tasks.</p></li></ol> <h3 id="example-code"><a href="#example-code" aria-hidden="true" class="header-anchor">#</a> Example Code</h3> <p>Prerequisites</p> <ul><li><p>The <code>LOSCFG_BASE_IPC_SEM</code> parameter in the <code>los_config.h</code> file is set to YES.</p></li> <li><p>The <code>LOSCFG_BASE_IPC_SEM_LIMIT</code> parameter in the <code>los_config.h</code> file is set to the maximum number (for example, 1024) of semaphores that the operating system allows.</p></li></ul> <p>The code is as follows:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token comment">/* task pid */</span>
<span class="token keyword">static</span> UINT32 g_TestTaskID01<span class="token punctuation">,</span> g_TestTaskID02<span class="token punctuation">;</span>
<span class="token comment">/* sem id */</span>
<span class="token keyword">static</span> UINT32 g_usSemID<span class="token punctuation">;</span>

<span class="token keyword">static</span> VOID <span class="token function">Example_SemTask1</span><span class="token punctuation">(</span>VOID<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    UINT32 uwRet<span class="token punctuation">;</span>

    <span class="token function">dprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Example_SemTask1 try get sem g_usSemID ,timeout 10 ticks.\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* get sem, timeout is 10 ticks */</span>
    uwRet <span class="token operator">=</span> <span class="token function">LOS_SemPend</span><span class="token punctuation">(</span>g_usSemID<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* get sem ok */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>LOS_OK <span class="token operator">==</span> uwRet<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">LOS_SemPost</span><span class="token punctuation">(</span>g_usSemID<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/* timeout, get sem fail */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>LOS_ERRNO_SEM_TIMEOUT <span class="token operator">==</span> uwRet<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">dprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Example_SemTask1 timeout and try get sem g_usSemID wait forever.\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* get sem wait forever, LOS_SemPend return until has been get mux */</span>
        uwRet <span class="token operator">=</span> <span class="token function">LOS_SemPend</span><span class="token punctuation">(</span>g_usSemID<span class="token punctuation">,</span> LOS_WAIT_FOREVER<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>LOS_OK <span class="token operator">==</span> uwRet<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">dprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Example_SemTask1 wait_forever and got sem g_usSemID success.\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">LOS_SemPost</span><span class="token punctuation">(</span>g_usSemID<span class="token punctuation">)</span><span class="token punctuation">;</span>
            uwRet <span class="token operator">=</span> <span class="token function">LOS_InspectStatusSetByID</span><span class="token punctuation">(</span>LOS_INSPECT_SEM<span class="token punctuation">,</span> LOS_INSPECT_STU_SUCCESS<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>LOS_OK <span class="token operator">!=</span> uwRet<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token function">dprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Set Inspect Status Err\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">static</span> VOID <span class="token function">Example_SemTask2</span><span class="token punctuation">(</span>VOID<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    UINT32 uwRet<span class="token punctuation">;</span>
    <span class="token function">dprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Example_SemTask2 try get sem g_usSemID wait forever.\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* wait forever get sem */</span>
    uwRet <span class="token operator">=</span> <span class="token function">LOS_SemPend</span><span class="token punctuation">(</span>g_usSemID<span class="token punctuation">,</span> LOS_WAIT_FOREVER<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>LOS_OK <span class="token operator">==</span> uwRet<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">dprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Example_SemTask2 get sem g_usSemID and then delay 20ticks .\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* task delay 20 ticks */</span>
    <span class="token function">LOS_TaskDelay</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">dprintf</span><span class="token punctuation">(</span><span class="token string">&quot;Example_SemTask2 post sem g_usSemID .\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* release sem */</span>
    <span class="token function">LOS_SemPost</span><span class="token punctuation">(</span>g_usSemID<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

UINT32 <span class="token function">Example_Semphore</span><span class="token punctuation">(</span>VOID<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    UINT32 uwRet <span class="token operator">=</span> LOS_OK<span class="token punctuation">;</span>
    TSK_INIT_PARAM_S stTask1<span class="token punctuation">;</span>
    TSK_INIT_PARAM_S stTask2<span class="token punctuation">;</span>

   <span class="token comment">/* create sem */</span>
    <span class="token function">LOS_SemCreate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>g_usSemID<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* lock task schedue */</span>
    <span class="token function">LOS_TaskLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* create task1 */</span>
    <span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stTask1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>TSK_INIT_PARAM_S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stTask1<span class="token punctuation">.</span>pfnTaskEntry <span class="token operator">=</span> <span class="token punctuation">(</span>TSK_ENTRY_FUNC<span class="token punctuation">)</span>Example_SemTask1<span class="token punctuation">;</span>
    stTask1<span class="token punctuation">.</span>pcName       <span class="token operator">=</span> <span class="token string">&quot;MutexTsk1&quot;</span><span class="token punctuation">;</span>
    stTask1<span class="token punctuation">.</span>uwStackSize  <span class="token operator">=</span> LOSCFG_BASE_CORE_TSK_IDLE_STACK_SIZE<span class="token punctuation">;</span>
    stTask1<span class="token punctuation">.</span>usTaskPrio   <span class="token operator">=</span> TASK_PRIO_TEST<span class="token punctuation">;</span>
    uwRet <span class="token operator">=</span> <span class="token function">LOS_TaskCreate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>g_TestTaskID01<span class="token punctuation">,</span> <span class="token operator">&amp;</span>stTask1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>uwRet <span class="token operator">!=</span> LOS_OK<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">dprintf</span><span class="token punctuation">(</span><span class="token string">&quot;task1 create failed .\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> LOS_NOK<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* create task2 */</span>
    <span class="token function">memset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stTask2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>TSK_INIT_PARAM_S<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stTask2<span class="token punctuation">.</span>pfnTaskEntry <span class="token operator">=</span> <span class="token punctuation">(</span>TSK_ENTRY_FUNC<span class="token punctuation">)</span>Example_SemTask2<span class="token punctuation">;</span>
    stTask2<span class="token punctuation">.</span>pcName       <span class="token operator">=</span> <span class="token string">&quot;MutexTsk2&quot;</span><span class="token punctuation">;</span>
    stTask2<span class="token punctuation">.</span>uwStackSize  <span class="token operator">=</span> LOSCFG_BASE_CORE_TSK_IDLE_STACK_SIZE<span class="token punctuation">;</span>
    stTask2<span class="token punctuation">.</span>usTaskPrio   <span class="token operator">=</span> <span class="token punctuation">(</span>TASK_PRIO_TEST <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    uwRet <span class="token operator">=</span> <span class="token function">LOS_TaskCreate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>g_TestTaskID02<span class="token punctuation">,</span> <span class="token operator">&amp;</span>stTask2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>uwRet <span class="token operator">!=</span> LOS_OK<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">dprintf</span><span class="token punctuation">(</span><span class="token string">&quot;task2 create failed .\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/* delete task 1 */</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>LOS_OK <span class="token operator">!=</span> <span class="token function">LOS_TaskDelete</span><span class="token punctuation">(</span>g_TestTaskID01<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">dprintf</span><span class="token punctuation">(</span><span class="token string">&quot;task1 delete failed .\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> LOS_NOK<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* unlock task schedue */</span>
    <span class="token function">LOS_TaskUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    uwRet <span class="token operator">=</span> <span class="token function">LOS_SemPost</span><span class="token punctuation">(</span>g_usSemID<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* task delay 40 ticks */</span>
    <span class="token function">LOS_TaskDelay</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* delete sem */</span>
    <span class="token function">LOS_SemDelete</span><span class="token punctuation">(</span>g_usSemID<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> uwRet<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="verification"><a href="#verification" aria-hidden="true" class="header-anchor">#</a> Verification</h3> <p>The verification result is as follows:</p> <p><img src="data:image/png;base64,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" alt></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/LiteOS/LiteOS_Documents/edit/master/docs/en/kernel/semaphore.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/5/2018, 5:27:29 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/en/kernel/mutex.html" class="prev">
          Mutex
        </a></span> <span class="next"><a href="/en/kernel/time-magmt.html">
          Time Management
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/28.231c5754.js" defer></script><script src="/assets/js/app.d2f7ed44.js" defer></script>
  </body>
</html>
