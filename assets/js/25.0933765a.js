(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{201:function(t,s,a){t.exports=a.p+"assets/img/mutex-operation.807040df.png"},202:function(t,s){t.exports="data:image/png;base64,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"},633:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"mutex"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mutex","aria-hidden":"true"}},[t._v("#")]),t._v(" Mutex")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#overview"}},[t._v("Overview")]),n("ul",[n("li",[n("a",{attrs:{href:"#basic-concept"}},[t._v("Basic Concept")])]),n("li",[n("a",{attrs:{href:"#operation-mechanism"}},[t._v("Operation Mechanism")])])])]),n("li",[n("a",{attrs:{href:"#development-guidelines"}},[t._v("Development Guidelines")]),n("ul",[n("li",[n("a",{attrs:{href:"#usage-scenarios"}},[t._v("Usage Scenarios")])]),n("li",[n("a",{attrs:{href:"#functions"}},[t._v("Functions")])]),n("li",[n("a",{attrs:{href:"#development-process"}},[t._v("Development Process")])])])]),n("li",[n("a",{attrs:{href:"#precautions"}},[t._v("Precautions")])]),n("li",[n("a",{attrs:{href:"#programming-example"}},[t._v("Programming Example")]),n("ul",[n("li",[n("a",{attrs:{href:"#example-description"}},[t._v("Example Description")])]),n("li",[n("a",{attrs:{href:"#example-code"}},[t._v("Example Code")])]),n("li",[n("a",{attrs:{href:"#verification"}},[t._v("Verification")])])])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"overview"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#overview","aria-hidden":"true"}},[t._v("#")]),t._v(" Overview")]),t._v(" "),n("h3",{attrs:{id:"basic-concept"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#basic-concept","aria-hidden":"true"}},[t._v("#")]),t._v(" Basic Concept")]),t._v(" "),n("p",[t._v("A mutual exclusion (mutex) is a special binary semaphore designed to grant a task exclusive use of common resources.")]),t._v(" "),n("p",[t._v("At a given point in time, a mutex is either locked or unlocked. When a task acquires a mutex, the mutex is locked and the task has exclusive ownership of the mutex. When the task releases the mutex, the mutex is unlocked and the task loses exclusive ownership of the mutex. While a task has exclusive ownership of a mutex, other tasks are unable to acquire or release the mutex.")]),t._v(" "),n("p",[t._v("In a multi-task environment, it is common to see tasks competing for the same common resource. A mutex can avoid the task conflict problem without the trouble of priority inversion experienced with semaphores.")]),t._v(" "),n("p",[t._v("Mutex of Huawei LiteOS has characters as below:")]),t._v(" "),n("ul",[n("li",[t._v("Solve the problem of priority inversion by using inheritance algorithm.")])]),t._v(" "),n("h3",{attrs:{id:"operation-mechanism"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#operation-mechanism","aria-hidden":"true"}},[t._v("#")]),t._v(" Operation Mechanism")]),t._v(" "),n("p",[n("strong",[t._v("Mutex Operation Principle")])]),t._v(" "),n("p",[t._v("In a multi-task environment, multiple tasks may battle for the same common resource. If the common resource is not shareable, it must be used exclusively by a particular task.")]),t._v(" "),n("p",[t._v("When a task accesses a non-shareable common resource, the mutex is locked. Other tasks are blocked from accessing the resource until the task releases the mutex. In this way, only one task accesses the non-shareable common resource at a given point in time, which ensures the integrity of the non-shareable common resources.")]),t._v(" "),n("p",[t._v("Working principle of a mutex")]),t._v(" "),n("p",[n("img",{attrs:{src:a(201),alt:""}})]),t._v(" "),n("h2",{attrs:{id:"development-guidelines"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#development-guidelines","aria-hidden":"true"}},[t._v("#")]),t._v(" Development Guidelines")]),t._v(" "),n("h3",{attrs:{id:"usage-scenarios"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usage-scenarios","aria-hidden":"true"}},[t._v("#")]),t._v(" Usage Scenarios")]),t._v(" "),n("p",[t._v("A mutex is a good choice for preventing tasks from accessing the same shared resource at the same time.")]),t._v(" "),n("h3",{attrs:{id:"functions"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#functions","aria-hidden":"true"}},[t._v("#")]),t._v(" Functions")]),t._v(" "),n("p",[t._v("The mutex module provides the following functions:")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("Function Category")]),t._v(" "),n("th",[t._v("API")]),t._v(" "),n("th",[t._v("Description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("Mutex creation and deletion")]),t._v(" "),n("td",[t._v("LOS_MuxCreate")]),t._v(" "),n("td",[t._v("Creates a mutex")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("LOS_MuxDelete")]),t._v(" "),n("td",[t._v("Deletes a mutex")])]),t._v(" "),n("tr",[n("td",[t._v("Mutex request and release")]),t._v(" "),n("td",[t._v("LOS_MuxPend")]),t._v(" "),n("td",[t._v("Pends on a mutex")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("LOS_MuxPost")]),t._v(" "),n("td",[t._v("Releases a mutex")])])])]),t._v(" "),n("h3",{attrs:{id:"development-process"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#development-process","aria-hidden":"true"}},[t._v("#")]),t._v(" Development Process")]),t._v(" "),n("p",[t._v("Mutex typical development process:")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("Call the "),n("code",[t._v("LOS_MuxCreate")]),t._v(" API to create a mutex.")])]),t._v(" "),n("li",[n("p",[t._v("Call the "),n("code",[t._v("LOS_MuxPend")]),t._v(" API to pend on a mutex. Takes actions depending on the mutex pend mode.")])])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("Non-blocking mode: If no task has acquired the mutex or the task that has acquired the mutex is the same as the requesting task, the operating system grants the mutex to the requesting task.")])]),t._v(" "),n("li",[n("p",[t._v("Permanent blocking mode: the requesting task waits endlessly for a mutex and enters Blocked state in the meantime. If the mutex has not been acquired by any task, the operating system grants the mutex to the requesting task. Otherwise, the operating system blocks the requesting task until the mutex is released. While the requesting task is blocked, the operating system selects the task with the highest priority among ready tasks to be executed.")])]),t._v(" "),n("li",[n("p",[t._v("Temporary blocking mode: the requesting task waits for a specified period of time for a mutex and enters Blocked state in the meantime. If the mutex has not been acquired by any task, the operating system grants the mutex to the requesting task. Otherwise, the operating system blocks the requesting task until the mutex is released or the timeout period elapses. It then selects the ready task with the highest priority to be executed.")])])]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("Call the "),n("code",[t._v("LOS_MuxPost")]),t._v(" to release a mutex.")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("If there are tasks blocked from acquiring the mutex, the operating system wakes up the first blocked task. The woken-up task then enters Ready state and is scheduled.")])]),t._v(" "),n("li",[n("p",[t._v("If there are no tasks blocked from acquiring the mutex, the operating system releases the mutex.")])])]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("Call the "),n("code",[t._v("LOS_MuxDelete")]),t._v(" API to delete a mutex.")])]),t._v(" "),n("h2",{attrs:{id:"precautions"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#precautions","aria-hidden":"true"}},[t._v("#")]),t._v(" Precautions")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("Tasks are unable to lock the same mutex. If a task attempts to lock a mutex that has been locked by another task, the task will be blocked from locking the mutex until the mutex is unlocked.")])]),t._v(" "),n("li",[n("p",[t._v("Do not use any mutex for interrupt service routines.")])]),t._v(" "),n("li",[n("p",[t._v("Release a mutex immediately when the mutex is no longer in use. Otherwise, tasks will be blocked for a long time, slowing down task scheduling.")])]),t._v(" "),n("li",[n("p",[t._v("Do not change the priority of a task by calling APIs such as "),n("code",[t._v("LOS_TaskPriSet")]),t._v(" while the task has full ownership of a mutex.")])])]),t._v(" "),n("h2",{attrs:{id:"programming-example"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#programming-example","aria-hidden":"true"}},[t._v("#")]),t._v(" Programming Example")]),t._v(" "),n("h3",{attrs:{id:"example-description"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#example-description","aria-hidden":"true"}},[t._v("#")]),t._v(" Example Description")]),t._v(" "),n("p",[t._v("In the programming example, the following activities will happen:")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("The "),n("code",[t._v("Example_TaskEntry")]),t._v(" task is executed to create a mutex. Task scheduling is locked. Two tasks "),n("code",[t._v("Example_MutexTask1")]),t._v(" and "),n("code",[t._v("Example_MutexTask2")]),t._v(" are created, where "),n("code",[t._v("Example_MutexTask2")]),t._v(" takes a higher priority than "),n("code",[t._v("Example_MutexTask1")]),t._v(". Then, task scheduling is unlocked.")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("Example_MutexTask2")]),t._v(" is scheduled, granted a mutex, and then sent to sleep mode for 100 ticks. While "),n("code",[t._v("Example_MutexTask2")]),t._v(" is suspended, Example_Mu`texTask1 is woken up.")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("Example_MutexTask1")]),t._v(" pends on the mutex and is willing to wait the mutex for 10 ticks to become free. At the time when "),n("code",[t._v("Example_MutexTask1")]),t._v(" requests the mutex, the mutex is held by "),n("code",[t._v("Example_MutexTask2")]),t._v(" and consequently  "),n("code",[t._v("Example_MutexTask1")]),t._v(" is suspended. After the 10-tick wait period elapses, the mutex is still out of the reach of Example_MutexTask1, and "),n("code",[t._v("Example_MutexTask1")]),t._v(" is woken up, attempting to wait permanently for the mutex. The wait for the mutex switches "),n("code",[t._v("Example_MutexTask1")]),t._v(" to suspended state.")])]),t._v(" "),n("li",[n("p",[t._v("After 100 ticks, "),n("code",[t._v("Example_MutexTask2")]),t._v(" is woken up and releases the mutex. "),n("code",[t._v("Example_MutexTask1")]),t._v(" is scheduled, granted the mutex, and finally releases it.")])]),t._v(" "),n("li",[n("p",[t._v("300 ticks after "),n("code",[t._v("Example_MutexTask1")]),t._v(" is finished, Example_TaskEntry is executed to delete the mutex.")])])]),t._v(" "),n("h3",{attrs:{id:"example-code"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#example-code","aria-hidden":"true"}},[t._v("#")]),t._v(" Example Code")]),t._v(" "),n("p",[t._v("Prerequisites")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("The "),n("code",[t._v("LOSCFG_BASE_IPC_MUX")]),t._v(" parameter in the "),n("code",[t._v("los_config.h")]),t._v(" file is set to YES.")])]),t._v(" "),n("li",[n("p",[t._v("The "),n("code",[t._v("LOSCFG_BASE_IPC_MUX_LIMIT")]),t._v(" parameter in the "),n("code",[t._v("los_config.h")]),t._v(" file is set to the maximum number of mutexes that the operating system allows.")])])]),t._v(" "),n("p",[t._v("The code is as follows:")]),t._v(" "),n("div",{staticClass:"language-c extra-class"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("/* mux handle id */")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" UINT32 g_Testmux01"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("/* task pid */")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" UINT32 g_TestTaskID01"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" UINT32 g_TestTaskID02"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" VOID "),n("span",{attrs:{class:"token function"}},[t._v("Example_MutexTask1")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VOID"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    UINT32 uwRet"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token function"}},[t._v("dprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"task1 try to get mutex, wait 10 Tick.\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/* get mux */")]),t._v("\n    uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_MuxPend")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("g_Testmux01"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("10")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" LOS_OK"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("dprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"task1 get mutex g_Testmux01.\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("/* release mux */")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("LOS_MuxPost")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("g_Testmux01"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" LOS_ERRNO_MUX_TIMEOUT"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("dprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"task1 timeout and try to get  mutex, wait forever.\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("/* LOS_WAIT_FOREVER type get mux, LOS_MuxPend return until has been get mux */")]),t._v("\n        uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_MuxPend")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("g_Testmux01"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LOS_WAIT_FOREVER"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" LOS_OK"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{attrs:{class:"token function"}},[t._v("dprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"task1 wait forever,got mutex g_Testmux01 success.\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{attrs:{class:"token comment"}},[t._v("/* release mux */")]),t._v("\n            "),n("span",{attrs:{class:"token function"}},[t._v("LOS_MuxPost")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("g_Testmux01"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_InspectStatusSetByID")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LOS_INSPECT_MUTEX"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LOS_INSPECT_STU_SUCCESS"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LOS_OK "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" uwRet"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{attrs:{class:"token function"}},[t._v("dprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Set Inspect Status Err\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" VOID "),n("span",{attrs:{class:"token function"}},[t._v("Example_MutexTask2")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VOID"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    UINT32 uwRet"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token function"}},[t._v("dprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"task2 try to get mutex, wait forever.\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/* get mux */")]),t._v("\n    uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_MuxPend")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("g_Testmux01"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LOS_WAIT_FOREVER"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" LOS_OK"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("dprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"task2 LOS_MuxPend failed .\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{attrs:{class:"token function"}},[t._v("dprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"task2 get mutex g_Testmux01 and suspend 100 Tick.\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/* task delay 100 ticks */")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("LOS_TaskDelay")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("100")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token function"}},[t._v("dprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"task2 resumed and post the g_Testmux01\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/* release mux */")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("LOS_MuxPost")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("g_Testmux01"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nUINT32 "),n("span",{attrs:{class:"token function"}},[t._v("Example_MutexLock")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VOID"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    UINT32 uwRet"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    TSK_INIT_PARAM_S stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    TSK_INIT_PARAM_S stTask2"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/* create mux */")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("LOS_MuxCreate")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("g_Testmux01"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/* lock task schedue */")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("LOS_TaskLock")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/* create task1 */")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("memset")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("sizeof")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TSK_INIT_PARAM_S"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pfnTaskEntry "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TSK_ENTRY_FUNC"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("Example_MutexTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pcName       "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"MutexTsk1"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uwStackSize  "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" LOSCFG_BASE_CORE_TSK_DEFAULT_STACK_SIZE"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("usTaskPrio   "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("5")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_TaskCreate")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("g_TestTaskID01"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" LOS_OK"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("dprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"task1 create failed .\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" LOS_NOK"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/* create task2 */")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("memset")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("stTask2"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("sizeof")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TSK_INIT_PARAM_S"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pfnTaskEntry "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TSK_ENTRY_FUNC"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("Example_MutexTask2"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pcName       "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"MutexTsk2"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uwStackSize  "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" LOSCFG_BASE_CORE_TSK_DEFAULT_STACK_SIZE"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("usTaskPrio   "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("4")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_TaskCreate")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("g_TestTaskID02"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("stTask2"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" LOS_OK"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("dprintf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"task2 create failed .\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" LOS_NOK"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/* unlock task schedue */")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("LOS_TaskUnlock")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/* task delay 300 ticks */")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("LOS_TaskDelay")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("300")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/* delete mux */")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("LOS_MuxDelete")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("g_Testmux01"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" LOS_OK"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),n("h3",{attrs:{id:"verification"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#verification","aria-hidden":"true"}},[t._v("#")]),t._v(" Verification")]),t._v(" "),n("p",[t._v("The verification result is as follows:")]),t._v(" "),n("p",[n("img",{attrs:{src:a(202),alt:""}})])])}],e=a(0),o=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);o.options.__file="mutex.md";s.default=o.exports}}]);